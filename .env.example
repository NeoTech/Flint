# Copy this file to .env and fill in your values.
# Never commit .env — it is gitignored.
#
#   cp .env.example .env

# ── Theme ─────────────────────────────────────────────────────────────────────
# Selects the active build-time theme. Must match a folder under themes/.
# Leave as 'default' (or omit entirely) to use the built-in theme.
# Create themes/<name>/templates/ and/or themes/<name>/styles/main.css to
# override individual templates or the full stylesheet.
THEME=default

# ── Stripe ────────────────────────────────────────────────────────────────────
# Get these from https://dashboard.stripe.com/apikeys
# Use Test mode keys (pk_test_ / sk_test_) during development.
# Switch to Live keys (pk_live_ / sk_live_) for production.
STRIPE_PUBLISHABLE_KEY=pk_test_your_publishable_key_here
STRIPE_SECRET_KEY=sk_test_your_secret_key_here

# ── Checkout mode ─────────────────────────────────────────────────────────────
# payment-links  → per-product Stripe Payment Links, no server needed
#                  run `bun run build:sync` to generate links
# serverless     → multi-item cart posted to a checkout server
#                  requires CHECKOUT_RUNTIME + CHECKOUT_ENDPOINT below
CHECKOUT_MODE=payment-links

# ── Checkout server ───────────────────────────────────────────────────────────
# Only used when CHECKOUT_MODE=serverless.
#
# CHECKOUT_RUNTIME controls which server is used:
#   bun        → run locally with `bun run serve:checkout`
#   cloudflare → deploy to Cloudflare Workers with `bun run deploy:checkout:cloudflare`
CHECKOUT_RUNTIME=bun
#
# CHECKOUT_ENDPOINT is the public URL the browser POSTs checkout requests to.
# This value is baked into the JS bundle at build time — update it when deploying.
#   Local Bun server:   http://localhost:3001
#   Cloudflare Worker:  https://flint-checkout.<subdomain>.workers.dev
#     (the deploy script prints the exact URL after deploying)
CHECKOUT_ENDPOINT=http://localhost:3001
CHECKOUT_PORT=3001

# ── Site URL ──────────────────────────────────────────────────────────────────
# Used for Stripe Payment Link redirects and local dev checkout server.
# Keep this as localhost for local development.
# The Cloudflare Worker gets its own production URL via CLOUDFLARE_SITE_URL (see below).
SITE_URL=http://localhost:3000
#
# Base path appended to all generated links — set to your GitHub Pages repo sub-path.
# e.g. /my-repo for a site at yourusername.github.io/my-repo
# Leave empty if deploying to a root domain (e.g. yourdomain.com)
BASE_PATH=

# ── Address collection ────────────────────────────────────────────────────────
# Billing address on Stripe Checkout: 'required' | 'auto' (auto = only when needed for tax)
STRIPE_BILLING_ADDRESS=required
# Comma-separated ISO 3166-1 alpha-2 shipping country codes
# Full list: https://stripe.com/docs/api/checkout/sessions/create#checkout_session_create-shipping_address_collection-allowed_countries
STRIPE_SHIPPING_COUNTRIES=US,GB

# ── CORS ──────────────────────────────────────────────────────────────────────
# Comma-separated origins allowed to call the Bun checkout server.
# Note: the Cloudflare Worker uses wildcard CORS (*) and ignores this variable.
ALLOWED_ORIGINS=http://localhost:3000,https://localhost:3000

# ── Cloudflare (shared credentials) ─────────────────────────────────────────
# Used by both the Workers deploy and Pages deploy scripts.
# Where to find your credentials:
#   Email:      your Cloudflare login email
#   API Key:    dash.cloudflare.com → My Profile → API Tokens → Global API Key → View
#   Account ID: dash.cloudflare.com → Workers & Pages (URL bar), or right sidebar on any page
CLOUDFLARE_EMAIL=you@example.com
CLOUDFLARE_GLOBAL_API_KEY=your_global_api_key_here
CLOUDFLARE_ACCOUNT_ID=your_account_id_here
#
# CLOUDFLARE_API_TOKEN is required for `wrangler pages deploy` (scoped token).
# The Global API Key above works for the Workers deploy but NOT for Pages deployments
# in non-interactive mode — wrangler silently skips the deployment without a token.
# Create one at: dash.cloudflare.com → My Profile → API Tokens → Create Token
# Use the "Edit Cloudflare Workers" template (it includes Cloudflare Pages:Edit).
CLOUDFLARE_API_TOKEN=your_api_token_here

# ── Cloudflare Workers ────────────────────────────────────────────────────────
# Only needed when CHECKOUT_RUNTIME=cloudflare.
# Deploy with: bun run deploy:checkout:cloudflare
CF_WORKER_NAME=flint-checkout
CF_WORKER_MAIN=functions/checkout-cloudflare.ts
CF_WORKER_COMPAT_DATE=2024-11-01
#
# Production URL for the Worker's Stripe success/cancel redirect URLs.
# Set to your full site URL including BASE_PATH, e.g. https://you.github.io/my-repo
# This lets SITE_URL stay as localhost for local dev without affecting the deployed Worker.
CLOUDFLARE_SITE_URL=https://yourusername.github.io/your-repo-name
#
# Custom domain routing — only needed if you want the Worker on your own domain
# instead of the default *.workers.dev subdomain.
# CLOUDFLARE_ZONE_ID=       your zone ID (Cloudflare → domain → Overview → right sidebar)
# CLOUDFLARE_WORKER_ROUTE=  URL pattern, e.g. checkout.yourdomain.com/*

# ── Cloudflare Pages ──────────────────────────────────────────────────────────
# Deploy with: bun run deploy:cloudflare:pages
CF_PAGES_PROJECT=flint-site
CF_PAGES_DIR=dist