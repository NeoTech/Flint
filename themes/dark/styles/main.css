@tailwind base;
@tailwind components;
@tailwind utilities;

/* ═══════════════════════════════════════════════════════════════════
   DARK THEME — Component overrides
   All rules below sit OUTSIDE @layer so they outrank every Tailwind
   utility class (non-layered CSS wins over @layer declarations per
   the CSS Cascade spec). No !important needed.
   ═══════════════════════════════════════════════════════════════════

   Colour palette
   ─────────────
   Canvas             #0f0818   95% purple-black
   Surface / card     #1a0b2e   slightly lighter for UI surfaces
   Border             #2a1540   visible but subtle
   Border bright      #3a1f56   card/table borders
   Gradient start     #160930   hero gradient
   Gradient mid       #2d1560   hero gradient
   Accent purple      #9d6fff   primary interactive
   Accent hover       #b88aff
   Text heading       #f2c8ff   pastel pink-lavender
   Text body          #e0d0ff   pastel lavender
   Text muted         #b8a0e0   dimmer body text
   Text link          #c4aaff   pastel purple links
   ═══════════════════════════════════════════════════════════════════ */

/* ── Navigation ──────────────────────────────────────────────────── */
/* Use nav.bg-white to beat the .bg-white utility (0,1,1 > 0,1,0) */
nav.bg-white {
  background-color: #1a0b2e;
  border-bottom-color: #3a1f56;
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.5);
}

#flint-nav-menu.bg-white {
  background-color: #1a0b2e;
  border-top-color: #3a1f56;
}

/* Inactive desktop & mobile links */
nav a.text-gray-700               { color: #c4aaff; }
nav a.text-gray-700:hover         { color: #f2c8ff; background-color: #2a1540; }
/* Active link */
nav a.text-blue-600               { color: #f2c8ff; background-color: #3a1f56; }
nav a.bg-blue-50                  { background-color: #3a1f56; }

/* Hamburger button */
button#flint-nav-toggle           { color: #c4aaff; }
button#flint-nav-toggle:hover     { color: #f2c8ff; background-color: #2a1540; }
button#flint-nav-toggle svg path  { stroke: currentColor; }

/* ── StatsBar ─────────────────────────────────────────────────────── */
section.bg-gray-900 {
  background-color: #0a0514;
  border-bottom: 1px solid #2a1540;
}
/* Recolour the muted stat labels */
section.bg-gray-900 p.text-gray-400 { color: #b8a0e0; }

/* ── CTA / Hero (CtaSection component) ───────────────────────────── */
/* Hero variant — gradient background → deep purple */
section.bg-gradient-to-br {
  background-image: linear-gradient(to bottom right, #160930, #2d1560, #160930);
  background-color: #160930;
}
/* Banner variant — gradient background */
section.bg-gradient-to-r {
  background-image: linear-gradient(to right, #1e0b3a, #2d1560);
  background-color: #1e0b3a;
}
/* Decorative blur circles — tint purple instead of blue */
section.bg-gradient-to-br .bg-white.rounded-full { background-color: #9d6fff; }
section.bg-gradient-to-br .bg-blue-300.rounded-full { background-color: #6633cc; }
/* Tagline above the heading */
section.bg-gradient-to-br p.text-blue-200,
section.bg-gradient-to-r  p.text-blue-200 { color: #c4aaff; }
/* Subtitle text */
section.bg-gradient-to-br p.text-blue-100,
section.bg-gradient-to-r  p.text-blue-100 { color: #e0d0ff; }
/* Primary CTA button: white bg → pastel purple */
section.bg-gradient-to-br a.bg-white,
section.bg-gradient-to-r  a.bg-white {
  background-color: #9d6fff;
  color: #0f0818;
}
section.bg-gradient-to-br a.bg-white:hover,
section.bg-gradient-to-r  a.bg-white:hover { background-color: #b88aff; }
/* Secondary (outlined) button — soften border */
section.bg-gradient-to-br a.border-white\/30,
section.bg-gradient-to-r  a.border-white\/30 {
  border-color: rgba(196, 170, 255, 0.4);
  color: #e0d0ff;
}
section.bg-gradient-to-br a.border-white\/30:hover,
section.bg-gradient-to-r  a.border-white\/30:hover { background-color: rgba(157, 111, 255, 0.15); }

/* ── CardGrid (FeatureGrid / ShowcaseGrid) ────────────────────────── */
/* Section heading & subtitle */
.text-center h2.text-gray-900 { color: #f2c8ff; }
.text-center p.text-gray-500  { color: #b8a0e0; }

/* Cards — plain div variant */
div.bg-white.rounded-xl {
  background-color: #1a0b2e;
  border-color: #3a1f56;
}
div.bg-white.rounded-xl:hover { box-shadow: 0 4px 20px rgba(157, 111, 255, 0.15); }

/* SkillCards — use rounded-lg not rounded-xl */
div.bg-white.rounded-lg {
  background-color: #1a0b2e;
  border-color: #3a1f56;
}
div.bg-white.rounded-lg:hover { box-shadow: 0 4px 20px rgba(157, 111, 255, 0.15); }
div.bg-white.rounded-lg h3.text-gray-900 { color: #f2c8ff; }
div.bg-white.rounded-lg p.text-gray-600  { color: #b8a0e0; }

/* Cards — link (anchor) variant */
a.group.bg-white.rounded-xl {
  background-color: #1a0b2e;
  border-color: #3a1f56;
}
a.group.bg-white.rounded-xl:hover {
  border-color: #9d6fff;
  box-shadow: 0 4px 20px rgba(157, 111, 255, 0.2);
}

/* Shop listing product cards — children-directive uses article.bg-white.rounded-xl */
article.bg-white.rounded-xl {
  background-color: #1a0b2e;
  border-color: #3a1f56;
}
article.bg-white.rounded-xl:hover { box-shadow: 0 4px 20px rgba(157, 111, 255, 0.2); }
article.bg-white.rounded-xl h3.text-gray-900 { color: #f2c8ff; }
article.bg-white.rounded-xl p.text-gray-500  { color: #b8a0e0; }
article.bg-white.rounded-xl span.text-gray-900 { color: #e0d0ff; }
article.bg-white.rounded-xl .bg-gray-50 { background-color: #0f0818; }

/* Card titles */
div.bg-white.rounded-xl h3.text-gray-900,
a.group.bg-white.rounded-xl h3.text-gray-900 { color: #f2c8ff; }
/* Hover title colour on link cards */
a.group.bg-white.rounded-xl h3.group-hover\:text-blue-600 { }

/* Card description text */
div.bg-white.rounded-xl p.text-gray-600,
div.bg-white.rounded-xl p.text-gray-500,
a.group.bg-white.rounded-xl  p.text-gray-500,
a.group.bg-white.rounded-xl  p.text-gray-600 { color: #b8a0e0; }

/* Icon background pills — light pastel → dark pastel equivalents */
.bg-blue-100   { background-color: #1e0d40; }
.bg-green-100  { background-color: #0a2018; }
.bg-purple-100 { background-color: #280a40; }
.bg-orange-100 { background-color: #2a1000; }
.bg-indigo-100 { background-color: #0d0a40; }
.bg-rose-100   { background-color: #2a0818; }
.bg-cyan-100   { background-color: #042030; }
.bg-pink-100   { background-color: #2a0a18; }
.bg-amber-100  { background-color: #2a1800; }
.bg-teal-100   { background-color: #042020; }
.bg-red-100    { background-color: #2a0808; }
.bg-gray-100   { background-color: #1a0b2e; }
.bg-gray-200   { background-color: #1e0d2e; }
/* Matching 50 shades used in tables */
.bg-gray-50    { background-color: #160b24; }

/* Badge text — dark *-800 / *-700 values become pastel to stay readable
   on their newly-dark backgrounds. Specificity matches the component classes. */
.text-blue-800   { color: #c4aaff; }
.text-green-800  { color: #a8ffc4; }
.text-purple-800 { color: #d4aaff; }
.text-amber-800  { color: #ffe0a0; }
.text-rose-800   { color: #ffaacc; }
.text-teal-800   { color: #a0ffe0; }
.text-orange-800 { color: #ffcc88; }
.text-indigo-800 { color: #b8b0ff; }
.text-gray-700   { color: #c4aaff; }
/* -700 badge variants used in LabelFooter */
.text-blue-700   { color: #c4aaff; }
.text-green-700  { color: #a8ffc4; }
.text-purple-700 { color: #d4aaff; }
.text-amber-700  { color: #ffe0a0; }
.text-rose-700   { color: #ffaacc; }
.text-teal-700   { color: #a0ffe0; }
.text-indigo-700 { color: #b8b0ff; }
.text-orange-700 { color: #ffcc88; }

/* ── LabelFooter ─────────────────────────────────────────────────── */
footer.border-t {
  border-top-color: #2a1540;
  background-color: transparent;
}
footer h3.text-gray-500 { color: #b8a0e0; }

/* Label badges — override each color pair (-700 variants used by LabelFooter) */
.bg-blue-100.text-blue-700     { background-color: #1e0d40; color: #c4aaff; }
.bg-green-100.text-green-700   { background-color: #0a2018; color: #a8ffc4; }
.bg-purple-100.text-purple-700 { background-color: #280a40; color: #d4aaff; }
.bg-amber-100.text-amber-700   { background-color: #2a1800; color: #ffe0a0; }
.bg-rose-100.text-rose-700     { background-color: #2a0818; color: #ffaacc; }
.bg-teal-100.text-teal-700     { background-color: #042020; color: #a0ffe0; }
.bg-indigo-100.text-indigo-700 { background-color: #0d0a40; color: #b8b0ff; }
.bg-orange-100.text-orange-700 { background-color: #2a1000; color: #ffcc88; }

/* Skill card badges — -800 variants, slightly lighter bg so they read against #1a0b2e card */
.bg-blue-100.text-blue-800     { background-color: #1e0d40; color: #c4aaff; }
.bg-green-100.text-green-800   { background-color: #143320; color: #a8ffc4; }
.bg-purple-100.text-purple-800 { background-color: #280a40; color: #d4aaff; }
.bg-amber-100.text-amber-800   { background-color: #2a1a00; color: #ffe0a0; }
.bg-rose-100.text-rose-800     { background-color: #2a0a1a; color: #ffaacc; }
.bg-teal-100.text-teal-800     { background-color: #04201a; color: #a0ffe0; }
.bg-indigo-100.text-indigo-800 { background-color: #0e0c40; color: #b8b0ff; }
.bg-orange-100.text-orange-800 { background-color: #2a1400; color: #ffcc88; }
.bg-gray-200.text-gray-700     { background-color: #1e1030; color: #c4aaff; }

/* ── Generic prose / page content ────────────────────────────────── */
/* Any stray text-gray-* outside the components */
.text-gray-900 { color: #f2c8ff; }
.text-gray-600 { color: #b8a0e0; }
.text-gray-500 { color: #b8a0e0; }
.text-gray-400 { color: #9980c8; }
.border-gray-200 { border-color: #2a1540; }
.border-gray-100 { border-color: #2a1540; }

/* Hard-wired blue links (label-index titles, label-index inline links, etc.) */
.text-blue-600              { color: #c4aaff; }
.hover\:text-blue-600:hover { color: #f2c8ff; }
.text-blue-400              { color: #c4aaff; }

/* ── Buttons — bg-blue-600 / bg-blue-700 / bg-green-600 ─────────── */
/* Covers: Add to Cart, Cart toggle, Checkout. Use !important here
   because Tailwind writes these as utilities inside @layer utilities
   which would otherwise win on equal specificity. */
.bg-blue-600                      { background-color: #7c3aed !important; }
.hover\:bg-blue-600:hover         { background-color: #6d28d9 !important; }
.bg-blue-700,
.hover\:bg-blue-700:hover         { background-color: #6d28d9 !important; }
.bg-green-600                     { background-color: #5b21b6 !important; }
.hover\:bg-green-600:hover,
.hover\:bg-green-700:hover        { background-color: #4c1d95 !important; }

/* ── Product cards (Product.renderCard) ─────────────────────────── */
article.product-card {
  background-color: #1a0b2e;
  border-color: #3a1f56;
}
/* Image thumbnail box */
article.product-card .bg-gray-50 {
  background-color: #0f0818;
  border: 1px solid #2a1540;
}
/* Title */
article.product-card h2 { color: #f2c8ff; }
/* Description */
article.product-card p.text-gray-600 { color: #b8a0e0; }
/* Price */
article.product-card span.text-gray-900 { color: #e0d0ff; }

/* ── Product detail page (Product.renderDetail) ──────────────────── */
.product-detail .bg-gray-50 {
  background-color: #0f0818;
  border-color: #2a1540;
}
.product-detail .border-gray-200 { border-color: #2a1540; }
.product-detail p.text-gray-600  { color: #b8a0e0; }
/* Price in detail hero */
.product-detail p.text-gray-900  { color: #e0d0ff; }

/* ── Cart widget ─────────────────────────────────────────────────── */
/* Cart toggle button colour is handled by the .bg-blue-600 override above */

/* Cart dropdown panel — target by ID to beat utility specificity */
#flint-cart-panel {
  background-color: #1a0b2e !important;
  border-color: #3a1f56 !important;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
}
#flint-cart-panel h3 { color: #f2c8ff; }
#flint-cart-panel .text-gray-700 { color: #c4aaff; }
#flint-cart-panel .text-gray-400 { color: #9980c8; }
#flint-cart-panel .text-sm.font-semibold { color: #e0d0ff; }
/* Total line divider */
#flint-cart-panel .border-t { border-top-color: #3a1f56; }
/* Individual cart item rows */
#flint-cart-panel .border-b,
#flint-cart-panel .border-gray-100 { border-color: #2a1540; }

/* ── Dark theme — deep purple-black canvas with pastel accents ── */
@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    @apply antialiased;
    background-color: #0f0818;
    color: #e0d0ff;
  }

  /* Typography */
  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold tracking-tight;
    color: #f2c8ff;
  }

  h1 {
    @apply text-2xl sm:text-4xl mb-6;
  }

  h2 {
    @apply text-xl sm:text-3xl mb-4 mt-8;
  }

  h3 {
    @apply text-lg sm:text-2xl mb-3 mt-6;
  }

  p {
    @apply mb-4 leading-relaxed;
  }

  a {
    color: #c4aaff;
    transition: color 0.15s;
  }
  a:hover {
    color: #e2d4ff;
  }

  ul, ol {
    @apply mb-4 ml-6;
  }

  ul {
    @apply list-disc;
  }

  ol {
    @apply list-decimal;
  }

  li {
    @apply mb-1;
  }

  /* Code */
  code {
    @apply px-1.5 py-0.5 rounded text-sm font-mono;
    background-color: #1e0d2e;
    color: #d4b8ff;
  }

  pre {
    @apply p-3 sm:p-4 rounded-lg overflow-x-auto mb-4 text-sm;
    background-color: #08040f;
    color: #c8b8f0;
    max-width: 100%;
  }

  pre code {
    background: transparent;
    padding: 0;
    color: inherit;
  }

  /* Blockquote */
  blockquote {
    @apply pl-4 italic my-4;
    border-left: 4px solid #9d6fff;
    color: #c8aeff;
  }

  /* Tables */
  table {
    @apply w-full border-collapse mb-4;
    display: block;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  th, td {
    @apply px-3 py-2 text-left text-sm sm:text-base sm:px-4;
    border: 1px solid #3a1f56;
  }

  th {
    @apply font-semibold;
    background-color: #1e0d2e;
    color: #f0c8ff;
  }

  tr:nth-child(even) {
    background-color: #160b24;
  }

  /* HR */
  hr {
    @apply my-8;
    border-color: #3a1f56;
  }

  img, video, iframe, embed, object {
    @apply max-w-full h-auto;
  }
}

@layer components {
  .prose {
    @apply max-w-none;
    color: #e0d0ff;
  }

  .btn {
    @apply px-4 py-2 rounded font-medium transition-colors;
  }

  .btn-primary {
    background-color: #9d6fff;
    color: #0f0818;
  }
  .btn-primary:hover {
    background-color: #b88aff;
  }

  .btn-secondary {
    background-color: #2a1540;
    color: #e0d0ff;
  }
  .btn-secondary:hover {
    background-color: #3c2058;
  }
}

/* HTMX indicators */
.htmx-indicator {
  @apply opacity-0 transition-opacity duration-200;
}

.htmx-request .htmx-indicator {
  @apply opacity-100;
}

.htmx-request.htmx-indicator {
  @apply opacity-100;
}
